

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Setting up your computer environment for working with COS data &#8212; HST Notebooks</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/table.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/COS/Setup/Setup';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Downloading COS Data" href="../DataDl/DataDl.html" />
    <link rel="prev" title="COS Notebooks" href="../README.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/stsci_logo2.png" class="logo__image only-light" alt="HST Notebooks - Home"/>
    <script>document.write(`<img src="../../../_static/stsci_logo2.png" class="logo__image only-dark" alt="HST Notebooks - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    STScI Notebook Repository HQ
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">ACS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ACS/README.html">ACS Notebooks</a></li>


<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_findsat_mrt/acs_findsat_mrt_example.html">Satellite trail detection in ACS/WFC data using acstools.findsat_mrt</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_saturation_trails/acs_saturation_trails.html">ACS Linearity with Saturated Stars</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_cte_forward_model/acs_cte_forward_model_example.html">Pixel-based ACS/WFC CTE Forward Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_subarrays/acs_subarrays.html">ACS Image Reduction for Subarray Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_sbc_dark_analysis/acs_sbc_dark_analysis.html">SBC Dark Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_reduction/acs_reduction.html">ACS/WFC Image Reduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_pixel_area_maps/acs_pixel_area_maps.html">Obtaining Pixel Area Maps for ACS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ACS/acs_polarization_tools/acs_polarization_tools.html">Using ACS Polarization Tools</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">COS</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../README.html">COS Notebooks</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Setting up your computer environment for working with COS data</a></li>





<li class="toctree-l1"><a class="reference internal" href="../DataDl/DataDl.html">Downloading COS Data</a></li>




<li class="toctree-l1"><a class="reference internal" href="../ViewData/ViewData.html">Viewing COS Data</a></li>





<li class="toctree-l1"><a class="reference internal" href="../AsnFile/AsnFile.html">Modifying or Creating an Association File</a></li>





<li class="toctree-l1"><a class="reference internal" href="../CalCOS/CalCOS.html">Running the COS Data Pipeline (<code class="docutils literal notranslate"><span class="pre">CalCOS</span></code>)</a></li>






<li class="toctree-l1"><a class="reference internal" href="../SplitTag/SplitTag.html">Splitting COS Exposures into sub-exposures with <code class="docutils literal notranslate"><span class="pre">splittag</span></code></a></li>







<li class="toctree-l1"><a class="reference internal" href="../DayNight/DayNight.html">Filtering out COS Data taken during the Day or Night</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LSF/LSF.html">Working with the COS Line Spread Function (LSF)</a></li>

<li class="toctree-l1"><a class="reference internal" href="../Extract/Extract.html">Editing the extraction boxes in a spectral extraction file (<code class="docutils literal notranslate"><span class="pre">XTRACTAB</span></code>)</a></li>







</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">DrizzlePac</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/README.html">DrizzlePac Jupyter Notebook Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/Initialization/Initialization.html">DrizzlePac Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_to_catalogs/align_to_catalogs.html">Aligning HST images to an absolute reference catalog</a></li>



<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_multiple_visits/align_multiple_visits.html">Optimizing Image Alignment for Multiple HST Visits</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/align_sparse_fields/align_sparse_fields.html">Aligning Deep Exposures of Sparse Fields</a></li>








<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/drizzle_wfpc2/drizzle_wfpc2.html">Drizzling WFPC2 Images to use a Single Zeropoint</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/mask_satellite/mask_satellite.html">Satellite Trail Masking Techniques</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/optimize_image_sampling/optimize_image_sampling.html">Optimizing the Image Sampling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../DrizzlePac/using_updated_astrometry_solutions/using_updated_astrometry_solutions.html">Using updated astrometry solutions</a></li>


</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">NICMOS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../NICMOS/nicmos_unit_conversion/nicmos_unit_conversion.html">Programmatic Replacements for NICMOS Units Conversion Form</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">STIS</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../STIS/README.html">STIS-Notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/cross-correlation/cross-correlation.html">Correcting for Missing Wavecals with Cross-Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/custom_ccd_darks/custom_ccd_darks.html">Custom CCD Darks <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/drizpac_notebook/STIS_DrizzlePac_Tutorial.html">STIS DrizzlePac Tutorial <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/CoronagraphyViz/STIS_Coronagraphy_Visualization_v2.html">STIS Coronagraphy Visualization Tool (v2)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/calstis/calstis_2d_ccd.html">Calstis 2-D CCD Data Reduction <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/target_acquisition/target_acquisition.html">Evaluating STIS Target Acquisitions <a class="tocSkip"></a></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/view_data/view_data.html">Viewing STIS Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../STIS/extraction/1D_Extraction.html">1D Spectra Extraction <a class="tocSkip"></a></a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">WFC3</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../WFC3/README.html">WFC3Library</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Casjobs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../casjobs/HCV_casjobs_demo.html">Hubble Catalog of Variables Notebook (CasJobs version)</a></li>



</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://colab.research.google.com/github/spacetelescope/hst_notebooks/blob/main/notebooks/COS/Setup/Setup.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onColab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="initThebeSBT()"
  class="btn btn-sm btn-launch-thebe dropdown-item"
  title="Launch Thebe"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-play"></i>
  </span>
<span class="btn__text-container">Live Code</span>
</button>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/spacetelescope/hst_notebooks" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/spacetelescope/hst_notebooks/issues/new?title=Issue%20on%20page%20%2Fnotebooks/COS/Setup/Setup.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/notebooks/COS/Setup/Setup.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Setting up your computer environment for working with COS data</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Setting up your computer environment for working with COS data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning Goals</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">0. Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-for-those-new-to-python-jupyter-coding">Notes for those new to Python/Jupyter/Coding:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-notes">Other notes:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-a-conda-environment-for-working-with-cos-data">1. Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-conda">1.1. Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-conda-environment">1.2. Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-our-installation">Testing our installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-other-packages">Installing other packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">2. Setting up the git repo of other COS tutorials (<em>optional for some Notebooks</em>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos">3. Downloading up-to-date reference files (<em>recommended for running <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></em>)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calcos-and-reference-files"><code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> and reference files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-file-contexts">Reference file <strong>contexts</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-the-most-recent-context">3.1. Downloading the most recent context</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-1">Fig 3.1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-2">Fig 3.2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-3">Fig 3.3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-crds-command-line-tool">The CRDS Command line tool</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-an-older-context">3.2. Downloading an older context</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">Congratulations! You finished this Notebook!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">There are more COS data walkthrough Notebooks on different topics. You can find them here.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-notebook">About this Notebook</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><a id="topS"></a></p>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-your-computer-environment-for-working-with-cos-data">
<h1>Setting up your computer environment for working with COS data<a class="headerlink" href="#setting-up-your-computer-environment-for-working-with-cos-data" title="Permalink to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="learning-goals">
<h1>Learning Goals<a class="headerlink" href="#learning-goals" title="Permalink to this heading">#</a></h1>
<p><font size="4"> This Notebook is designed to walk the user (<em>you</em>) through: </font></p>
<p><strong>1. <span class="xref myst">Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data</span></strong></p>
<p>- 1.1. <span class="xref myst">Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code></span></p>
<p>- 1.2. <span class="xref myst">Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment</span></p>
<p><strong>2. <span class="xref myst">Setting up the Git repo of COS tutorials</span></strong> (<em>optional</em>)</p>
<p><strong>3. <span class="xref myst">Downloading up-to-date reference files</span></strong></p>
<p>- 3.1. <span class="xref myst">Downloading the most recent context</span></p>
<p>- 3.2. <span class="xref myst">Downloading an older context</span></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="introduction">
<h1>0. Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h1>
<p><strong>The Cosmic Origins Spectrograph (<a class="reference external" href="https://www.nasa.gov/content/hubble-space-telescope-cosmic-origins-spectrograph"><em>COS</em></a>) is an ultraviolet spectrograph on-board the Hubble Space Telescope (<a class="reference external" href="https://www.stsci.edu/hst/about"><em>HST</em></a>) with capabilities in the near ultraviolet (<em>NUV</em>) and far ultraviolet (<em>FUV</em>).</strong></p>
<p><strong>This tutorial will walk you through setting up a <code class="docutils literal notranslate"><span class="pre">Python</span></code> environment for COS data analysis on your computer.</strong></p>
<ul class="simple">
<li><p>For an in-depth manual to working with COS data and a discussion of caveats and user tips, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSDHB/">COS Data Handbook</a>.</p></li>
<li><p>For a detailed overview of the COS instrument, see the <a class="reference external" href="https://hst-docs.stsci.edu/display/COSIHB/">COS Instrument Handbook</a>.</p></li>
</ul>
<section id="notes-for-those-new-to-python-jupyter-coding">
<h2>Notes for those new to Python/Jupyter/Coding:<a class="headerlink" href="#notes-for-those-new-to-python-jupyter-coding" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>You will frequently see exclamation points (<strong>!</strong>) or dollar signs (<strong>$</strong>) at the beginning of a line of code. These are not part of the actual commands. The exclamation points tell a Jupyter Notebook to pass the following line to the command line, and the dollar sign merely indicates the start of a terminal prompt.</p></li>
<li><p>Similarly, when a variable or argument in a line of code is surrounded by sharp brackets, like &lt;these words are&gt;, this is an indication that the variable or argument is something which you should change to suit your data.</p></li>
<li><p>If you install the full Anaconda distribution with the <a class="reference external" href="https://docs.anaconda.com/anaconda/navigator/"><em>Anaconda Navigator</em> tool</a>, (see Section 1) you will also have access to a graphical interface (AKA a way to use windows and a point-and-click interface instead of the terminal for installing packages and managing environments).</p></li>
</ul>
</section>
<section id="other-notes">
<h2>Other notes:<a class="headerlink" href="#other-notes" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>It is sometimes preferable to use another package manager - <code class="docutils literal notranslate"><span class="pre">pip</span></code> - to install necessary packages, however <code class="docutils literal notranslate"><span class="pre">conda</span></code> can be used to create <code class="docutils literal notranslate"><span class="pre">Python</span></code> environments as well as install packages. You may see both <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">conda</span></code> used in these Notebooks.</p></li>
</ul>
<p>Developer Notes: This cell is tagged with the “hide-cell” tag.</p>
<p><a id = setupEnvS></a></p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-a-conda-environment-for-working-with-cos-data">
<h1>1. Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data<a class="headerlink" href="#setting-up-a-conda-environment-for-working-with-cos-data" title="Permalink to this heading">#</a></h1>
<p><a id = installcondaS></a></p>
<section id="installing-conda">
<h2>1.1. Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code><a class="headerlink" href="#installing-conda" title="Permalink to this heading">#</a></h2>
<p>You may already have a working <code class="docutils literal notranslate"><span class="pre">conda</span></code> tool. To check whether you have <code class="docutils literal notranslate"><span class="pre">conda</span></code> installed, open a terminal window and type <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">-V</span></code>, <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">--version</span></code>, or run the next cell. If your <code class="docutils literal notranslate"><span class="pre">conda</span></code> is installed and working, the terminal or cell will return the version of <code class="docutils literal notranslate"><span class="pre">conda</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>conda<span class="w"> </span>-V
</pre></div>
</div>
</div>
</div>
<p>If you receive a message that the command is unknown or not found, you must install <code class="docutils literal notranslate"><span class="pre">conda</span></code>. We recommend installing either the Anaconda or Minicoda distributions. See <a class="reference external" href="https://stenv.readthedocs.io/en/latest/getting_started.html#getting-started">this page</a> for instructions, and install either of the following:</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Conda Distribution (with link to download)</p></th>
<th class="head"><p>Short Description</p></th>
<th class="head"><p>Size</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://docs.anaconda.com/anaconda/install/"><code class="docutils literal notranslate"><span class="pre">Anaconda</span></code> Distribution</a></p></td>
<td><p>More beginner friendly, with lots of extras you likely won’t use</p></td>
<td><p>~ 3 GB</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html"><code class="docutils literal notranslate"><span class="pre">Miniconda</span></code> Distribution</a></p></td>
<td><p>Bare-bones <code class="docutils literal notranslate"><span class="pre">conda</span></code> distribution, which allows you to download only what you need</p></td>
<td><p>~ 400 MB</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://mamba.readthedocs.io/en/latest/installation.html"><code class="docutils literal notranslate"><span class="pre">Mamba</span></code> Distribution</a></p></td>
<td><p>Similar to <code class="docutils literal notranslate"><span class="pre">Miniconda</span></code>, rewritten in C++. Allows for faster speeds over <code class="docutils literal notranslate"><span class="pre">conda</span></code> for resolving environment dependencies.</p></td>
<td><p>~ 85 MB</p></td>
</tr>
</tbody>
</table>
<p><a id = createenvS></a></p>
</section>
<section id="creating-a-conda-environment">
<h2>1.2. Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment<a class="headerlink" href="#creating-a-conda-environment" title="Permalink to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">conda</span></code> allows for separate sets of packages to be installed on the same system in different environments, and for these environments to be shared so that other users can install the packages you used to get your code running. These packages are vital parts of your programming toolkit, and allow you to avoid “reinventing the wheel” by leveraging other peoples’ code. Thus, packages should be treated as any resource created by other person, and cited to avoid plagiarizing.</p>
<p>One package which is often necessary for working with COS data is <code class="docutils literal notranslate"><span class="pre">calcos</span></code>, which runs the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration/3-2-pipeline-processing-overview">CalCOS data pipeline</a>. However, this package will not, by default, be installed on your computer. We will install CalCOS, as well as all the packages you will need to run any of these COS Notebooks.</p>
<p>Open your terminal app, likely <code class="docutils literal notranslate"><span class="pre">Terminal</span></code> or <code class="docutils literal notranslate"><span class="pre">iTerm</span></code> on a Mac or <code class="docutils literal notranslate"><span class="pre">Windows</span> <span class="pre">Terminal</span></code> or <code class="docutils literal notranslate"><span class="pre">Powershell</span></code> on Windows. We’ll begin by adding the <code class="docutils literal notranslate"><span class="pre">conda-forge</span></code> channel to <code class="docutils literal notranslate"><span class="pre">conda</span></code>’s channel list. This enables <code class="docutils literal notranslate"><span class="pre">conda</span></code> to look in the right place to find all the packages we want to install.</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">config</span> <span class="pre">--add</span> <span class="pre">channels</span> <span class="pre">conda-forge</span></code></p>
<p>Now we can create our new environment. We’ll call it <code class="docutils literal notranslate"><span class="pre">cos_analysis_env</span></code>, and initialize it with <code class="docutils literal notranslate"><span class="pre">Python</span></code> version <code class="docutils literal notranslate"><span class="pre">3.10</span></code>.</p>
<!-- Substitute for working astroconda - This will revert to using astroconda once the astroconda software is updated  -->
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">cos_analysis_env</span> <span class="pre">python=3.10</span></code></p>
<p>Allow <code class="docutils literal notranslate"><span class="pre">conda</span></code> to install some necessary packages (when prompted, type <code class="docutils literal notranslate"><span class="pre">y</span></code> then enter/return). Then, <code class="docutils literal notranslate"><span class="pre">conda</span></code> will need a few minutes, depending on your internet speed to complete the installation. After this installation finishes, you can see all of your environments with:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">conda</span> <span class="pre">env</span> <span class="pre">list</span></code></p>
<p>Now, activate your new environment with:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">cos_analysis_env</span></code></p>
<p><em>Note</em> that you will need to activate your environment every time you open a new terminal or shell using <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">cos_analysis_env</span></code>. You can also do this automatically by appending <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">cos_analysis_env</span></code> to the end of your <code class="docutils literal notranslate"><span class="pre">.bashrc</span></code> or equivalent file. You must activate your desired <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment <em>before</em> starting a Jupyter Notebook kernel in that terminal.</p>
<p>Finally, install <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code>, <code class="docutils literal notranslate"><span class="pre">COSTools</span></code>, <code class="docutils literal notranslate"><span class="pre">CRDS</span></code>, and some other packages we’ll need using <code class="docutils literal notranslate"><span class="pre">pip</span></code>:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">calcos</span> <span class="pre">costools</span> <span class="pre">crds</span> <span class="pre">notebook</span> <span class="pre">jupyterlab</span> <span class="pre">matplotlib</span> <span class="pre">astroquery</span></code></p>
<p>Note that this will also likely take a few minutes to install as well.</p>
<section id="testing-our-installation">
<h3>Testing our installation<a class="headerlink" href="#testing-our-installation" title="Permalink to this heading">#</a></h3>
<p>We can test our installation by importing some of these packages. From the command line, try running:</p>
<p><code class="docutils literal notranslate"> <span class="pre">$</span> <span class="pre">python</span> <span class="pre">--version;</span> <span class="pre">python</span> <span class="pre">-c</span> <span class="pre">&quot;import</span> <span class="pre">numpy,</span> <span class="pre">calcos,</span> <span class="pre">costools,</span> <span class="pre">crds;</span> <span class="pre">print('Imports</span> <span class="pre">succesful')&quot;</span></code></p>
<p>This should return:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Python</span> <span class="mf">3.10.4</span>    <span class="c1"># (or a similar version number)</span>
<span class="n">Imports</span> <span class="n">successful</span>
</pre></div>
</div>
</section>
<section id="installing-other-packages">
<h3>Installing other packages<a class="headerlink" href="#installing-other-packages" title="Permalink to this heading">#</a></h3>
<p>We can add any other packages we need with this command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&lt;first</span> <span class="pre">package</span> <span class="pre">name&gt;</span> <span class="pre">&lt;second</span> <span class="pre">package</span> <span class="pre">name&gt;</span> <span class="pre">...</span> <span class="pre">&lt;last</span> <span class="pre">package</span> <span class="pre">name&gt;</span></code></p>
<p>Now, go ahead and install the <a class="reference external" href="https://specutils.readthedocs.io/en/stable/"><code class="docutils literal notranslate"><span class="pre">specutils</span></code> package</a>, which is briefly discussed in the <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks/blob/main/notebooks/COS/ViewData/ViewData.ipynb">ViewData.ipynb</a> Notebook, using the following command:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">specutils</span></code></p>
<p>We’ll finish our installations by using the <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code> command to download <a class="reference external" href="https://scipy.org/">SciPy</a> and <a class="reference external" href="https://pandas.pydata.org/">Pandas</a>:</p>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">pandas</span> <span class="pre">scipy</span></code></p>
<p><a id = tutS></a></p>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">
<h1>2. Setting up the git repo of other COS tutorials (<em>optional for some Notebooks</em>)<a class="headerlink" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks" title="Permalink to this heading">#</a></h1>
<p>While most of the tutorial Notebooks can generally be downloaded and run independently, this is not true at present for <strong>ViewData.ipynb</strong>, which needs both the Scripts and ViewData directories installed side-by-side.
For the best experience, we recommend cloning the entire repository of Notebooks.</p>
<p>You almost certainly have the <code class="docutils literal notranslate"><span class="pre">git</span></code> command line tool installed. To test it, type <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">--version</span></code> into the command line, which should respond with a version number. If you don’t have Git installed, follow the instructions to install it <a class="reference external" href="https://www.atlassian.com/git/tutorials/install-git">here</a>.</p>
<p>All of the tutorial Notebooks are hosted at this <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks">GitHub repo</a>.</p>
<p>Clicking on the green “Code” button on this GitHub page gives you several options for downloading the code. Enter the directory that will store the downloaded notebooks, then copy either the <code class="docutils literal notranslate"><span class="pre">https</span></code> or <code class="docutils literal notranslate"><span class="pre">ssh</span></code> text under the <code class="docutils literal notranslate"><span class="pre">Clone</span></code> heading and type into your command line:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">git</span> <span class="pre">clone</span> <span class="pre">&lt;the</span> <span class="pre">text</span> <span class="pre">you</span> <span class="pre">copied&gt;</span></code> without the &lt;&gt;.</p>
<p>This will create a new directory that contains all of the tutorial notebooks you just cloned.</p>
<p><a id = crdsS></a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="downloading-up-to-date-reference-files-recommended-for-running-calcos">
<h1>3. Downloading up-to-date reference files (<em>recommended for running <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></em>)<a class="headerlink" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos" title="Permalink to this heading">#</a></h1>
<p><strong>This step is suggested if you intend to process or re-process COS data using the <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration">COS calibration pipeline: <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></a>.</strong></p>
<section id="calcos-and-reference-files">
<h2><code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> and reference files<a class="headerlink" href="#calcos-and-reference-files" title="Permalink to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> pipeline processes science data obtained with the COS instrument using a set of reference files, such as:</p>
<ul class="simple">
<li><p><strong>Bad pixel tables</strong> to subtract off bad pixels</p></li>
<li><p><strong>Flat field files</strong> to flat-field a spectrum <em>pixel-by-pixel</em></p></li>
<li><p><strong>Time-dependent sensitivity (TDS) tables</strong> to correct for <a class="reference external" href="https://www.stsci.edu/hst/instrumentation/cos/performance/sensitivity">COS’ long-term loss of sensitivity</a></p></li>
<li><p><strong>And many more</strong> - see <a class="reference external" href="https://hst-docs.stsci.edu/cosdhb/chapter-3-cos-calibration/3-4-descriptions-of-spectroscopic-calibration-steps">COS Data Handbook Section 3.4</a></p></li>
</ul>
<p>These reference files are regularly updated by the COS team to provide the best possible calibration. The current and prior files are all hosted by the <a class="reference external" href="https://hst-crds.stsci.edu">HST Calibration Reference Data System (CRDS)</a>. To get the most up-to-date COS reference files, you can use the <code class="docutils literal notranslate"><span class="pre">crds</span></code> command line tool which we installed in <span class="xref myst">Section 1</span> of this Notebook.</p>
<p><strong>Because some of these files are quite large, it is <em>highly recommended</em> you create a cache on your computer of all the COS files, which you may then update as necessary. We’ll explain how to set up that cache below.</strong></p>
<!-- Alternatives for downloading *just the reference files you need at that moment* are offered in the walkthrough Notebooks which pertain to running the pipeline, i.e. ["Calcos.ipynb"](https://github.com/spacetelescope/hst_notebooks/blob/main/notebooks/COS/Setup/Setup.ipynb). --></section>
<section id="reference-file-contexts">
<h2>Reference file <strong>contexts</strong><a class="headerlink" href="#reference-file-contexts" title="Permalink to this heading">#</a></h2>
<p><strong>First we must briefly explain “contexts”:</strong>
The history of reference files is stored in <strong>context files</strong>, which list the most up-to-date reference files at their time of creation.</p>
<ul class="simple">
<li><p>If you wish to calibrate your data with the newest files provided by the COS team, (<em>which is highly likely</em>) you should download and use the files indicated by the current COS instrument context file, called an <code class="docutils literal notranslate"><span class="pre">imap</span></code> file. To download the files listed in the current context, see <span class="xref myst">Section 3.1</span>.</p></li>
<li><p>However, there are circumstances in which you may wish to use an older context, such as when you are trying to recreate the exact steps taken by another researcher. For this, see <span class="xref myst">Section 3.2</span>.</p></li>
<li><p>Finally, you may wish to tweak the individual reference files used, such that they don’t correspond to any particular instrument context. This is discussed in our <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks/blob/main/notebooks/COS/CalCOS/CalCOS.ipynb">notebook on running the <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> pipeline</a>.</p></li>
</ul>
<p><a id = newcC></a></p>
</section>
<section id="downloading-the-most-recent-context">
<h2>3.1. Downloading the most recent context<a class="headerlink" href="#downloading-the-most-recent-context" title="Permalink to this heading">#</a></h2>
<p>First, we will check the CRDS website to determine what the current context is, as it changes regularly. In your browser, navigate to <a class="reference external" href="https://hst-crds.stsci.edu">the HST CRDS homepage</a>, and you will see a page as in Fig. 3.1:</p>
<section id="fig-3-1">
<h3>Fig 3.1<a class="headerlink" href="#fig-3-1" title="Permalink to this heading">#</a></h3>
<center><img src=./figures/crds1.png width ="900" title="CRDS Homepage" alt="The CRDS homepage. There is a dropdown which lists all Hubble instruments. The table at the bottom of the page lists historical contexts."> </center>
<p>At the bottom of this page is a list of recent contexts, titled “Context History”. Clicking the context listed with the Status “Operational” (circled in red in Fig 3.1) will take you to that context’s page, as shown in Fig. 3.2:</p>
</section>
<section id="fig-3-2">
<h3>Fig 3.2<a class="headerlink" href="#fig-3-2" title="Permalink to this heading">#</a></h3>
<center><img src=./figures/crds2.png width ="900" title="CRDS current 'Historical References' context page" alt="The CRDS Historical References context page on the CRDS site. Each instrument is listed on the dropdown."> </center>
<p>By clicking the “cos” tab, (circled in red), you will be open up the tab, showing a page similar to Fig. 3.3, where you can find the current COS instrument context file: <code class="docutils literal notranslate"><span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span></code>. This filename is circled in red in Fig. 3.3.</p>
</section>
<section id="fig-3-3">
<h3>Fig 3.3<a class="headerlink" href="#fig-3-3" title="Permalink to this heading">#</a></h3>
<center><img src=./figures/crds3.png width ="900" title="Current COS context on the CRDS site" alt="Showing the current COS context on the CRDS site. There is a large list of reference files, and the imap file labeled at the top of this list as hst_cos_0320.imap"> </center>
<p>Note down or copy the filename you just found.</p>
</section>
<section id="the-crds-command-line-tool">
<h3>The CRDS Command line tool<a class="headerlink" href="#the-crds-command-line-tool" title="Permalink to this heading">#</a></h3>
<p>Now we can download all the files in this context. Remember to first activate the <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment you created in <span class="xref myst">Section 1.2</span>, or you may not have the necessary <code class="docutils literal notranslate"><span class="pre">crds</span></code> package installed.</p>
<p>In the next cells, we will now set several environment variables:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First we will import OS to set environment variables</span>
<span class="kn">import</span> <span class="nn">os</span>
</pre></div>
</div>
</div>
</div>
<p>We determine where to save the files on your computer. As long as you are consistent, this can be wherever you like:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Getting your home environment</span>
<span class="n">home_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;HOME&quot;</span><span class="p">]</span>

<span class="c1"># Then we will set the CRDS_PATH environment_variable</span>
<span class="c1"># Creating path to where the files are saved</span>
<span class="n">crds_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">home_dir</span><span class="p">,</span> <span class="s2">&quot;crds_cache&quot;</span><span class="p">)</span>
<span class="c1"># Setting the environment variable CRDS_PATH to our CRDS path</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CRDS_PATH&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crds_path</span>
</pre></div>
</div>
</div>
</div>
<p>Here we are setting an environment variable to our CRDS server so we can access the files online:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the CRDS_SERVER_URL environment_variable</span>

<span class="c1"># URL for the STScI CRDS page</span>
<span class="n">crds_server_url</span> <span class="o">=</span> <span class="s2">&quot;https://hst-crds.stsci.edu&quot;</span>
<span class="c1"># Setting env variable to URL</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;CRDS_SERVER_URL&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">crds_server_url</span>
</pre></div>
</div>
</div>
</div>
<p>Now we can run the initial command to sync all the files we might need. The <code class="docutils literal notranslate"><span class="pre">&lt;context</span> <span class="pre">number&gt;</span></code> is the last four digits of the <code class="docutils literal notranslate"><span class="pre">imap</span></code> filename, circled in red in Fig 3.3, without the &lt;&gt;. <em>This may take from a few minutes to several hours, depending on your internet connection</em>:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">crds</span> <span class="pre">sync</span> <span class="pre">--contexts</span> <span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span> <span class="pre">--fetch-references</span></code></p>
<p>For running CalCOS, we recommend creating an environment variable pointing to this directory called <code class="docutils literal notranslate"><span class="pre">lref</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the lref environment variable</span>
<span class="n">lref</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">crds_path</span><span class="p">,</span> <span class="s2">&quot;references/hst/cos&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;lref&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lref</span>
</pre></div>
</div>
</div>
</div>
<p><strong>Well done.</strong> Your reference files are now all downloaded to the cache you set up, in subdirectories for the observatory and instrument they pertain to.
To see the COS reference files you just downloaded:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>ls<span class="w"> </span><span class="nv">$lref</span>
</pre></div>
</div>
</div>
</div>
<p><a id = oldcC></a></p>
</section>
</section>
<section id="downloading-an-older-context">
<h2>3.2. Downloading an older context<a class="headerlink" href="#downloading-an-older-context" title="Permalink to this heading">#</a></h2>
<p><strong>If you know the <code class="docutils literal notranslate"><span class="pre">imap</span></code> context you wish to download files from,</strong> simply run the initial sync command with that context file:</p>
<p><code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">crds</span> <span class="pre">sync</span> <span class="pre">--contexts</span> <span class="pre">hst_cos_&lt;context</span> <span class="pre">number&gt;.imap</span> <span class="pre">--fetch-references</span></code></p>
<p><strong>If you instead know the observatory-wide pipeline context, (called a <code class="docutils literal notranslate"><span class="pre">pmap</span></code> file,)</strong> you can determine the relevant <code class="docutils literal notranslate"><span class="pre">imap</span></code> file by going to the <a class="reference external" href="https://hst-crds.stsci.edu/display_context_history/">“more history”</a> or <a class="reference external" href="https://hst-crds.stsci.edu/display_all_contexts/">“all contexts”</a> tabs of the CRDS website.</p>
<p>These pages are accessible either via the links above, or the buttons boxed in blue in Fig. 3.1. Clicking on the <code class="docutils literal notranslate"><span class="pre">pmap</span></code> filename and then on the cos tab will show you the cos <code class="docutils literal notranslate"><span class="pre">imap</span></code> filename as in Fig. 3.3. You can then run the above <code class="docutils literal notranslate"><span class="pre">crds</span> <span class="pre">sync</span></code> command with this <code class="docutils literal notranslate"><span class="pre">imap</span></code> file as your context.</p>
<p><strong>Finally, if you instead have a FITS file of processed COS data whose context you would like to match,</strong> simply open its FITS header to find the <code class="docutils literal notranslate"><span class="pre">CRDS_CTX</span></code> keyword.
The value for this keyword should be a <code class="docutils literal notranslate"><span class="pre">pmap</span></code> file, which you can search for as in the above case. Then run the above <code class="docutils literal notranslate"><span class="pre">crds</span> <span class="pre">sync</span></code> command with this <code class="docutils literal notranslate"><span class="pre">imap</span></code> file as your context.</p>
<p>Again, we recommend creating an environment variable pointing to this directory called <code class="docutils literal notranslate"><span class="pre">lref</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the lref environment variable</span>
<span class="n">lref</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">crds_path</span><span class="p">,</span> <span class="s2">&quot;references/hst/cos&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;lref&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lref</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="congratulations-you-finished-this-notebook">
<h2>Congratulations! You finished this Notebook!<a class="headerlink" href="#congratulations-you-finished-this-notebook" title="Permalink to this heading">#</a></h2>
<section id="there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">
<h3>There are more COS data walkthrough Notebooks on different topics. You can find them <a class="reference external" href="https://github.com/spacetelescope/hst_notebooks/tree/main/notebooks/COS">here</a>.<a class="headerlink" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here" title="Permalink to this heading">#</a></h3>
</section>
</section>
<hr class="docutils" />
<section id="about-this-notebook">
<h2>About this Notebook<a class="headerlink" href="#about-this-notebook" title="Permalink to this heading">#</a></h2>
<p><strong>Author:</strong> Nat Kerman <a class="reference external" href="mailto:nkerman&#37;&#52;&#48;stsci&#46;edu">nkerman<span>&#64;</span>stsci<span>&#46;</span>edu</a></p>
<p><strong>Updated On:</strong> 2023-03-23</p>
<blockquote>
<div><p><em>This tutorial was generated to be in compliance with the <a class="reference external" href="https://github.com/spacetelescope/style-guides">STScI style guides</a> and would like to cite the <a class="reference external" href="https://github.com/spacetelescope/style-guides/blob/master/templates/example_notebook.ipynb">Jupyter guide</a> in particular.</em></p>
</div></blockquote>
<p><span class="xref myst">Top of Page</span>
<img style="float: right;" src="https://raw.githubusercontent.com/spacetelescope/notebooks/master/assets/stsci_pri_combo_mark_horizonal_white_bkgd.png" alt="Space Telescope Logo" width="200px"/></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "spacetelescope/hst_notebooks",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks/COS/Setup"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../README.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">COS Notebooks</p>
      </div>
    </a>
    <a class="right-next"
       href="../DataDl/DataDl.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Downloading COS Data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Setting up your computer environment for working with COS data</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#learning-goals">Learning Goals</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">0. Introduction</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#notes-for-those-new-to-python-jupyter-coding">Notes for those new to Python/Jupyter/Coding:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-notes">Other notes:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-a-conda-environment-for-working-with-cos-data">1. Setting up a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment for working with COS data</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-conda">1.1. Installing <code class="docutils literal notranslate"><span class="pre">conda</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-a-conda-environment">1.2. Creating a <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-our-installation">Testing our installation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#installing-other-packages">Installing other packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-up-the-git-repo-of-other-cos-tutorials-optional-for-some-notebooks">2. Setting up the git repo of other COS tutorials (<em>optional for some Notebooks</em>)</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-up-to-date-reference-files-recommended-for-running-calcos">3. Downloading up-to-date reference files (<em>recommended for running <code class="docutils literal notranslate"><span class="pre">CalCOS</span></code></em>)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calcos-and-reference-files"><code class="docutils literal notranslate"><span class="pre">CalCOS</span></code> and reference files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#reference-file-contexts">Reference file <strong>contexts</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-the-most-recent-context">3.1. Downloading the most recent context</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-1">Fig 3.1</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-2">Fig 3.2</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fig-3-3">Fig 3.3</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#the-crds-command-line-tool">The CRDS Command line tool</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#downloading-an-older-context">3.2. Downloading an older context</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#congratulations-you-finished-this-notebook">Congratulations! You finished this Notebook!</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#there-are-more-cos-data-walkthrough-notebooks-on-different-topics-you-can-find-them-here">There are more COS data walkthrough Notebooks on different topics. You can find them here.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#about-this-notebook">About this Notebook</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By STScI
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>